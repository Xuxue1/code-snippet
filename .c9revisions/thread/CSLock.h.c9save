{"ts":1351345905561,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"#ifndef _CSLOCK_H_\n#define _CSLOCK_H_\n#include <Windows.h>\nclass CSLock\n{\npublic:\n    CSLock(CRITICAL_SECTION &cs)\n    {\n        CritSect = &cs;\n        EnterCriticalSection(CritSect);\n        IsLocked = true;\n    }\n\n    ~CSLock()\n    {\n        if (!IsLocked) return;\n        IsLocked = false;\n        LeaveCriticalSection(CritSect);\n    }\n\n    void Unlock()\n    {\n        IsLocked = false;\n        LeaveCriticalSection(CritSect);\n    }\n\n    void Relock()\n    {\n        EnterCriticalSection(CritSect);\n        IsLocked = true;\n    }\n\n    static bool Init(CRITICAL_SECTION &cs)\n    {\n        return (InitializeCriticalSectionAndSpinCount(&cs, 4000) == TRUE);\n    }\n\n    static void Destroy(CRITICAL_SECTION &cs)\n    {\n        DeleteCriticalSection(&cs);\n    }\n\nprivate:\n    CRITICAL_SECTION *CritSect;\n    bool IsLocked;\n\nprivate:\n    CSLock();\n};\n\n#endif"]],"start1":0,"start2":0,"length1":0,"length2":854}]],"length":854}
